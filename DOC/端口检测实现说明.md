
# 前端自动后端端口检测实现说明

## 功能描述
实现了前端自动检测后端端口的功能，支持后端端口在3000-3010范围内自动变化。

## 实现文件
1. `/Users/jinglw/Projects/CAC/frontend/src/services/api.ts` - fetch API端口检测
2. `/Users/jinglw/Projects/CAC/frontend/src/lib/api.ts` - Axios API端口检测

## 实现原理
1. **端口范围**：3000-3010
2. **检测方法**：
   - 先尝试HEAD请求到根路径
   - 如果失败，尝试GET请求到常见API路径：/api、/health、/status、/docs
3. **超时设置**：100ms/端口
4. **默认值**：如果没有找到可用端口，默认使用3001端口

## 使用说明
1. 如果需要手动指定端口，可以在`.env.local`文件中设置`NEXT_PUBLIC_API_URL=http://localhost:端口号`
2. 如果没有设置环境变量，系统将自动检测可用端口
3. 检测过程会在浏览器控制台输出日志：`已自动检测到后端端口: XXXX`

## 注意事项
1. 确保后端服务器在3000-3010范围内运行
2. 确保后端响应HEAD请求或至少一个检测路径的GET请求
3. 检测过程约需要1秒（最坏情况），应用启动初期的API请求可能会延迟

